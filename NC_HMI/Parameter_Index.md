#

|数组|全局变量|意义
|:----:|:----:|:----:|
|**PLC_NC交换变量**|
|$A_DBB[0]|DB4900.DBX0.0|是否修整
|$A_DBB[1]|DB4900.DBX1.0|是否手动对刀
|$A_DBB[2]|DB4900.DBX2.0|是否退刀，异步动作信号
|$A_DBB[3]|DB4900.DBX3.0|液压动作回退到位
|$A_DBB[4]|DB4900.DBX4.0|液压动作伸出到位
|$A_DBB[5]|DB4900.DBX5.0|是否自动对刀
|$A_DBB[6]|DB4900.DBX6.0|C轴旋转
|$A_DBB[7]|DB4900.DBX7.0|自动对刀测量机构1汽缸回退到位
|$A_DBB[8]|DB4900.DBX8.0|自动对刀测量机构1汽缸伸出到位
|$A_DBB[9]|DB4900.DBX9.0|自动门打开开关
|$A_DBB[10]|DB4900.DBX10.0|自动门关闭开关
|$A_DBB[11]|DB4900.DBX11.0|
|$A_DBB[12]|DB4900.DBX12.0|砂轮当前状态(0停止/1启动)
|$A_DBB[13]|DB4900.DBX13.0|修整轮当前状态(0停止/1启动)
|$A_DBB[14]|DB4900.DBX14.0|升角夹紧动作检测信号(0未松开/1已松开)
|$A_DBB[15]|DB4900.DBX15.0|
|$A_DBB[16]|DB4900.DBX16.0|外圆砂轮当前状态(0停止/1启动)
|$A_DBB[17]|DB4900.DBX17.0|液压卡盘夹紧到位时为1，未到位为0
|$A_DBB[18]|DB4900.DBX18.0|液压卡盘松开到位时为1，未到位为0
|$A_DBB[19]|DB4900.DBX19.0|zc插补期间x退刀，同步动作信号
|$A_DBB[20]|DB4900.DBX20.0|自动对刀测量机构2汽缸回退到位
|$A_DBB[21]|DB4900.DBX21.0|自动对刀测量机构2汽缸伸出到位
|||与桁架机器人交互相关的信号
|$A_DBB[30]|DB4900.DBX30.0|机器人发给系统,取成品到位信号
|$A_DBB[31]|DB4900.DBX31.0|机器人发给系统,送毛坯到位信号
|$A_DBB[32]|DB4900.DBX32.0|机器人发给系统,手爪收回到位信号
|$A_DBB[60]|DB4900.DBX60.0|系统发给机器人,罩壳顶部门已打开信号,M80置1(有效),M81置0
|$A_DBB[61]|DB4900.DBX61.0|系统发给机器人,预完成,通知机械手准备,M82置1(有效),M83置0
|$A_DBB[62]|DB4900.DBX62.0|系统发给机器人,机床故障,M84置1(有效),M85置0
|$A_DBB[63]|DB4900.DBX63.0|系统发给机器人,卡盘松开完成,M86置1(有效),M87置0
|$A_DBB[64]|DB4900.DBX64.0|系统发给机器人,卡盘夹紧完成,M88置1(有效),M89置0
|||
|$A_PROBE[1]||测量探头1偏转
|$A_PROBE[2]||测量探头2偏转
|$AC_MEA[1]||测量探头1任务状态
|$AC_MEA[2]||测量探头2任务状态
||DB2700.DBX1.0|测头信号状态
|||
|MD14510[0]|DB4500.DBW0|润滑间歇时间(1min)
|MD14510[1]|DB4500.DBW2|润滑启动时间(10ms)
|MD14514[0]|DB4500.DBD2000|模拟量砂轮极限速度
|MD14510[4]|DB4500.DBW8|砂轮风扇停留时间
|||
|R299|-->WHEEL_RPM1|模拟量砂轮1转速
|R298|-->WHEEL_RPM2|模拟量砂轮2转速
|R297|-->DWHEEL_RPM1|模拟量修整轮1转速
|R296|-->DWHEEL_RPM2|模拟量修整轮2转速
|R280|-->$AA_IM[X]|退刀时存储X轴当前坐标
|R281|-->$AA_IM[Z]|退刀时存储Z轴当前坐标
|||
|PLCASUP1|ASUP1|PLC异步子程序-退刀键启动
|||
|**机床配置参数(CONFIG)**|
|CONFIG[0]|有无自动对刀0=无/1=有
|CONFIG[1]|有无自动门0=无/1=有
|CONFIG[2]|有无自动螺旋角0=无/1=有
|CONFIG[3]|砂轮类型选择(0模拟量/1伺服/2异步电机)
|CONFIG[4]|修整轮类型选择(0模拟量/1伺服2异步电机)
|CONFIG[5]|自动对刀后是否直接磨削(0否1是)
|CONFIG[6]|
|CONFIG[7]|


|**轴位置参数(POSITION)**|
|POSITION[0]|修整接触点坐标
|POSITION[1]|磨削接触点坐标
|POSITION[2]|装夹工件时X轴坐标
|POSITION[3]|装夹工件时Z轴坐标
|POSITION[4]|装夹工件时C轴坐标
|POSITION[5]|修整接触位置基准(砂轮主轴中心与滚轮圆弧顶部(金刚笔尖)重合时X(V)轴坐标)
|POSITION[6]|砂轮中心与滚轮中心水平重合时Z(W)轴坐标
|POSITION[7]|磨削接触位置基准(砂轮主轴中心与磨削初始接触位置重合时X轴的坐标)
|POSITION[8]|砂轮在工件中心时X轴坐标
|POSITION[9]|工件左端
|POSITION[10]|工件右端
|POSITION[11]|磨削起点坐标
|POSITION[12]|磨削终点坐标
|POSITION[13]|磨削过程中换头,或Z轴移动时X轴安全位置(内螺纹为工件中心)
|POSITION[14]|磨削中点=(起点+终点)/2
|POSITION[15]|自动对刀Z轴起始安全位置
|POSITION[16]|自动对刀起始C轴角度
|POSITION[17]|自动对刀接近开关在工件中心时X轴坐标
|POSITION[18]|接近开关进入工件开始测量时的Z坐标
|POSITION[19]|接近开关能稳定感应到信号时的X轴坐标
|POSITION[20]|初始修整接触点坐标
|POSITION[21]|初始磨削接触点坐标
|**修整参数(DRESSER)**|
|DRESSER[0]|新砂轮直径
|DRESSER[1]|砂轮当前直径
|DRESSER[2]|砂轮最大可用直径
|DRESSER[3]|砂轮最小可用直径
|DRESSER[4]|滚轮左右高度差(左侧为基准)
|DRESSER[5]|滚轮圆弧半径
|DRESSER[6]|滚轮左右圆弧半径差(左侧为基准)
|DRESSER[7]|0=新砂轮/1=旧砂轮
|DRESSER[8]|修整轮直径
|DRESSER[9]|修整轮线速度
|DRESSER[10]|界面设定粗修次数
|DRESSER[11]|界面设定粗修进给
|DRESSER[12]|界面设定粗修速度
|DRESSER[13]|界面设定精修次数
|DRESSER[14]|界面设定精修进给
|DRESSER[15]|界面设定精修速度
|DRESSER[16]|界面设定修整停留时间
|DRESSER[17]|界面设定修整时砂轮线速度
|DRESSER[18]|程序使用修整次数
|DRESSER[19]|程序使用修整进给
|DRESSER[20]|程序使用修整速度
|DRESSER[21]|程序使用修整时砂轮线速度
|DRESSER[22]|当前修整次数累计(用于修整次数控制)
|DRESSER[23]|当前修整次数累计(用于调整砂轮转速)
|**磨削参数(GRIND)**|
|GRIND[0]|工件旋向(1=右旋/-1=左旋)
|GRIND[1]|工件头数
|GRIND[2]|工件模数
|GRIND[3]|工件导程
|GRIND[4]|工件螺距
|GRIND[5]|工件螺旋升角
|GRIND[6]|磨削长度
|GRIND[7]|磨削总角度
|GRIND[8]|度
|GRIND[9]|分
|GRIND[10]|秒
|GRIND[11]|0=批量磨削/1=单件调整
|GRIND[12]|偏刀调整(头架向正向移动为正值，反之为负值)
|GRIND[13]|是否有锥度(0=无/1=有)
|GRIND[14]|锥度分子(锥度磨削中X轴向正向移动输入正值,反之负值)
|GRIND[15]|锥度分母(正值)
|GRIND[16]|锥度值GRIND[14]/(2*GRIND[15])
|GRIND[17]|锥度对应的X增量
|GRIND[18]|全长导程补偿
|GRIND[19]|中径调整
|**工艺参数(PROCESSER)**|
|||粗磨
|PROCESSER[0]|粗磨单双(0=单/1=双)
|PROCESSER[1]|粗磨次数
|PROCESSER[2]|粗磨进给
|PROCESSER[3]|粗磨头架转速
|PROCESSER[4]|粗磨修整设定
|PROCESSER[5]|粗磨磨削砂轮线速度
|PROCESSER[6]|粗磨修整次数
|PROCESSER[7]|粗磨修整进给
|PROCESSER[8]|粗磨修整速度
|PROCESSER[9]|粗磨修整砂轮线速度
|PROCESSER[10]|粗磨磨削砂轮转速
|PROCESSER[11]|粗磨修整砂轮转速
|||精磨
|PROCESSER[20]|半精磨单双
|PROCESSER[21]|半精磨次数
|PROCESSER[22]|半精磨进给
|PROCESSER[23]|半精磨头架转速
|PROCESSER[24]|半精磨修整设定
|PROCESSER[25]|半精磨磨削砂轮线速度
|PROCESSER[26]|半精磨修整次数
|PROCESSER[27]|半精磨修整进给
|PROCESSER[28]|半精磨修整速度
|PROCESSER[29]|半精磨修整砂轮线速度
|PROCESSER[30]|半精磨磨削砂轮转速
|PROCESSER[31]|半精磨修整砂轮转速
|||半精磨
|PROCESSER[40]|精磨单双
|PROCESSER[41]|精磨次数
|PROCESSER[42]|精磨进给
|PROCESSER[43]|精磨头架转速
|PROCESSER[44]|精磨修整设定
|PROCESSER[45]|精磨磨削砂轮线速度
|PROCESSER[46]|精磨修整次数
|PROCESSER[47]|精磨修整进给
|PROCESSER[48]|精磨修整速度
|PROCESSER[49]|精磨修整砂轮线速度
|PROCESSER[50]|精磨磨削砂轮转速
|PROCESSER[51]|精磨修整砂轮转速
|||终磨
|PROCESSER[60]|终磨单双
|PROCESSER[61]|终磨次数
|PROCESSER[62]|终磨进给
|PROCESSER[63]|终磨头架转速
|PROCESSER[64]|终磨修整设定
|PROCESSER[65]|终磨磨削砂轮线速度
|PROCESSER[66]|终磨修整次数
|PROCESSER[67]|终磨修整进给
|PROCESSER[68]|终磨修整速度
|PROCESSER[69]|终磨修整砂轮线速度
|PROCESSER[70]|终磨磨削砂轮转速
|PROCESSER[71]|终磨修整砂轮转速

|||当前工序
|PROCESSER[80]|当前工序单双
|PROCESSER[81]|当前工序次数
|PROCESSER[82]|当前工序进给
|PROCESSER[83]|当前工序头架转速
|PROCESSER[84]|当前工序修整设定
|PROCESSER[85]|当前工序磨削砂轮线速度
|PROCESSER[86]|当前工序修整次数
|PROCESSER[87]|当前工序修整进给
|PROCESSER[88]|当前工序修整速度
|PROCESSER[89]|当前工序修整砂轮线速度
|PROCESSER[90]|当前工序磨削砂轮转速
|PROCESSER[91]|当前工序修整砂轮转速

|PROCESSER[100]|当前工序磨削次数(用于工序结束判断)
|PROCESSER[101]|当前工序磨削头数
|PROCESSER[102]|当前工序磨削次数(用于磨削中修整判断)
|PROCESSER[103]|用于标记是否进行过磨削中修整(0=否/1=是)
|PROCESSER[104]|当前工序(1=粗磨/2=半精磨/3=精磨/4=终磨)
|**对刀参数(TOOL_SET)**|
|TOOL_SET[0]|磨削起始角度
|TOOL_SET[1]|自动对刀调整(头架向正向移动为正值，反之为负值)
|TOOL_SET[2]|对刀开始时读取C轴初始角度
|TOOL_SET[3]|对刀开始时读取Z轴初始坐标
|TOOL_SET[4]|手动对刀模式(zc插补0/静止对刀1)
|TOOL_SET[5]|首件对刀(0=否/1=是)
|TOOL_SET[6]|测头中心(接近开关感应片中心)与砂轮中心Z向间距






